<ion-view title="">

    <ion-nav-bar class="nav-title-slide-ios7 bar-stable">


        <ion-nav-buttons side="left">

            <button menu-toggle="left" ng-hide="$exposeAside.active" class="button button-icon button-clear ion-navicon"></button>

            <ion-nav-back-button class="button-clear"><i class="icon ion-ios7-arrow-back"></i>
                {{device.name}} {{device.placement}}
            </ion-nav-back-button>

        </ion-nav-buttons>

    </ion-nav-bar>

    <ion-content class="has-header">
        <div ng-controller="SensorCtrl">
            <ion-list>
                <div class="item  item-icon-right item-divider ">
                    Sensors and Controls
                    <i class="icon ion-ios7-plus-empty" ng-click="addControl()"></i>
                </div>

                <ion-item ng-repeat="control in device.controls"
                          ui-sref="app.control({ id: installationId , deviceid: device._id, controlid: control._id })">

                    {{control.name}}

                    <a class="item-icon-right">
                        <i ng-if="control.ctrlType=='data'" class="icon ion-speedometer" style="color:#4a87ee"></i>
                        <i ng-if="control.ctrlType=='status'" class="icon ion-ios7-gear" style="color:#4a87ee"></i>
                    </a>

                    <ion-option-button class="button-balanced" ng-click="copy(control)">Copy</ion-option-button>
                    <ion-option-button class="button-positive" ng-click="edit(control)">Edit</ion-option-button>
                    <ion-option-button class="button-assertive" ng-click="remove(control)">Delete</ion-option-button>

                </ion-item>
            </ion-list>
        </div>

        <div ng-controller="TriggerCtrl">
            <ion-list>
                <div class="item item-icon-right item-divider">
                    Alarms and Triggers
                    <i class="icon ion-ios7-plus-empty" ng-click="addTrigger()"></i>
                </div>

                <ion-item ng-repeat="trigger in device.triggers"
                          ui-sref="app.trigger({ id: installationId, deviceid: device._id, triggerid: trigger._id })">

                    {{trigger.name}} {{trigger.trigger_type | logicalop }} {{trigger.threshold_value}} / {{trigger.resolution}}

                    <a class="item-icon-right">
                        <i class="icon ion-android-alarm" style="color:#ef4e3a; font-size: 24px;"></i>
                    </a>

                    <ion-option-button class="button-balanced" ng-click="copy(trigger)">Copy</ion-option-button>
                    <ion-option-button class="button-positive" ng-click="edit(trigger)">Edit</ion-option-button>
                    <ion-option-button class="button-assertive" ng-click="remove(trigger)">Delete</ion-option-button>

                </ion-item>
            </ion-list>
        </div>
    </ion-content>
</ion-view>