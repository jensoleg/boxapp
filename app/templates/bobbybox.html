<ion-view title="{{installation.name}} {{installation.placement}}">

<ion-nav-bar class="nav-title-slide-ios7 bar-light">

    <ion-nav-back-button class="button-clear"><i class="icon ion-ios7-arrow-back"></i></ion-nav-back-button>

    <ion-nav-buttons side="left">
        <button menu-toggle="left" class="button button-icon button-clear ion-navicon"></button>
    </ion-nav-buttons>

</ion-nav-bar>

<ion-content>
<ion-refresher
        pulling-text="Refresh feed..."
        on-refresh="doRefresh()">
</ion-refresher>
<!---- device overview -->
<div class="row responsive-sm" style="padding: 0px;border-bottom: 1px;border-style: ridge;">
    <div class="col" style="padding: 0px;">
        <google-map class="feed"
                    data-tap-disabled="true"
                    center="map.center"
                    zoom="map.zoom"
                    options="map.options"
                    draggable="false"
                    control="map.control">
            <marker coords="map.marker" idkey="map.marker.id" icon="map.marker.icon"
                    click="map.onMarkerClick(map.marker)">
            </marker>
        </google-map>
    </div>

    <div class="col" style="padding: 0px;">
        <ion-list style="padding-bottom: 10px;">
            <ion-item style="border-style:none; padding: 6px;">
                <a style="font-size: 85%;" class="item-icon-left">
                    <i class="icon ion-ios7-person"></i>
                    {{installation.contact.name}}
                </a>
            </ion-item>
            <ion-item style="border-style:none;  padding: 6px;">
                <a style="font-size: 85%;" class="item-icon-left">
                    <i style="font-size: 24px;" class="icon ion-location"
                       ng-click="navigateTo( '{{installation.location.lat}}' , '{{ installation.location.lng}}' )"></i>
                    {{installation.address}}
                </a>
            </ion-item>
            <ion-item style="border-style:none;  padding: 6px;">
                <a class=" item-icon-left">
                    <i style="font-size: 24px;" class="icon ion-iphone"
                       ng-click="phoneTo('{{installation.contact.phone}}')"></i>
                    {{installation.contact.phone}}
                </a>
            </ion-item>
            <ion-item style="border-style:none;  padding: 6px;">
                <a style="font-size: 85%;" class="item-icon-left">
                    <i style="font-size: 16px;" class="icon ion-android-mail"
                       ng-click="emailTo('{{installation.contact.email}}')"></i>
                    {{installation.contact.email}}
                </a>
            </ion-item>
        </ion-list>
    </div>
</div>

<!---- device overview -->

<ion-list>
    <div ng-repeat="device in installation.devices">
        <ion-item class="reading item-icon-right"
                  style="border-width: 0px;"
                  ng-click="toggleDevice(device.id)">
            <label>
                <i class="icon-item ion-cube"
                   style="vertical-align: middle;font-size: 140%;"
                   ng-style="device.id == activeStream.deviceid && {'color': 'rgb(129, 207, 98)' } || {'color': 'rgb(82, 154, 233)'} ">
                </i>
                {{device.name}} {{device.placement}}
            </label>
            <i class="icon ion-wifi"
               style="font-size: 24px; right: 32px;"
               ng-click="showData(device.id, 'online')"
               ng-style="datastreams[device.id + 'online'].id == 'online' && datastreams[device.id + 'online'].current_value == '0' && {'color': 'rgb(253, 57, 80)'} || {'color': 'rgb(129, 207, 98)'}">
            </i>
            <ion-option-button class="button-assertive">Alarms</ion-option-button>
            <ion-option-button class="button-positive">Timers</ion-option-button>
        </ion-item>

        <ion-item class="reading item-icon-right"
                  style="padding-left: 14px; border-width: 0px;"
                  ng-class="{'selected' : readings.id == activeStream.id && device.id == activeStream.deviceid}"
                  ng-repeat="readings in datastreams | datastreamFilter:device.id | filter:{ id: '!online' }| orderObjectBy:'name':'reverse'"
                  ng-click="showData(readings.deviceid, readings.id)"
                  ng-show="isDeviceShown(device.id)">
            <label>
                <i class="icon-item ion-load-d"
                   style="vertical-align: middle;font-size: 140%; color: rgb(82, 154, 233);"
                   ng-hide="readings.ctrlType == 'data' && (readings.id != activeStream.id || readings.deviceid != activeStream.deviceid || !showChart)">
                </i>
                <i class="icon-item ion-ios7-speedometer"
                   style="vertical-align: middle;font-size: 140%;"
                   ng-show="readings.ctrlType == 'data' && (readings.id != activeStream.id || readings.deviceid != activeStream.deviceid || !showChart)"
                   ng-style="readings.id == activeStream.id && device.id == activeStream.deviceid && {'color': 'rgb(129, 207, 98)'} || {'color': 'rgb(82, 154, 233)'}">
                </i>
                {{readings.name}}
            </label>
                    <span class="badge badge-balanced">
                            {{readings.current_value}} {{readings.unit.symbol}}{{readings.unit.units}}
                    </span>
            <ion-option-button class="button-assertive">Alarms</ion-option-button>
            <ion-option-button class="button-positive" ng-click="controlDetails(device.id, readings.id)">
                Details
            </ion-option-button>

        </ion-item>
    </div>

    <ion-item class="item item-icon-right"
              style="background-color:#EEEEEE; padding: 10px;"
              ng-show="activeStream  && chartSettings.dataSource.length">

        <label>
            {{datastreams[activeStream.deviceid + activeStream.id].name}}
            {{datastreams[activeStream.deviceid + activeStream.id].current_value}}{{datastreams[activeStream.deviceid +
            activeStream.id].unit.symbol}}
        </label>

        <span style="position: absolute;right: 30px;">{{timeScale.text}}</span>

        <i class="icon ion-ios7-clock-outline">
            <select style="background:none;opacity:0"
                    ng-options="t.text group by t.type for t in timescale"
                    ng-model="timeScale"
                    ng-change="selectAction(timeScale, activeStream.deviceid, activeStream.id)">
            </select>
        </i>

    </ion-item>

    <ion-item ng-show="activeStream"
              style="border-width: 0px; padding: 10px; background-color:#EEEEEE;">
        <div id="chartContainer" style="height: 300px"
             dx-chart="{bindingOptions: {dataSource: 'chartSettings.dataSource',
                                         argumentAxis: 'chartSettings.argumentAxis',
                                         series: 'chartSettings.series'
                                        },
                                         valueAxis: chartSettings.valueAxis,
                                         legend: chartSettings.legend,
                                         tooltip: chartSettings.tooltip,
                                         crosshair: chartSettings.crosshair,
                                         palette: chartSettings.palette,
                                         commonAxisSettings: chartSettings.commonAxisSettings,
                                         commonPaneSettings: chartSettings.commonPaneSettings,
                                         animation: chartSettings.animation,
                                         loadingIndicator: chartSettings.loadingIndicator
                        }"
             ng-show="chartSettings.dataSource.length">
        </div>
    </ion-item>
</ion-list>

<!-----   soicail IOT ----->


<div class="comment-nest">
<ul class="media-list">
<li class="media">
    <a class="pull-left" href="#">
        <img class="media-object img-circle" alt="36x36"
             src="./images/laj.jpg" style="width: 36px; height: 36px;">
    </a>

    <div class="media-body">
        <div class="social-profile">
            <textarea msd-elastic placeholder="Enter a message" style="margin-top: 0px;" rows="1" ng-model="topPost"
                      ng-enter="newTopPost()">
            </textarea>
        </div>
    </div>
    <hr class="thin">
    <div ng-if="hasTopPost" class="media">
        <a class="pull-left" href="#">
            <img class="media-object img-circle" data-src="holder.js/36x36"
                 alt="36x36" src="./images/laj.jpg"
                 style="width: 36px; height: 36px;">
        </a>

        <div class="media-body">

            <div class="social-profile">
                <h3><a class="text-green" href="#">Lars Jessen</a>
                    <span><i class="fa fa-globe"></i>&nbsp;2 days ago</span>
                </h3>
                {{newTopPost}}

                <h3>
                                        <span><a class="text-green" ng-click="reply5 ? reply5=false : reply5=true"><i
                                                class="fa fa-reply"></i>&nbsp;Reply</a>
                                        </span>

                </h3>

                <textarea ng-if="reply5== true"
                          msd-elastic
                          placeholder="Enter your message"
                          rows="1"
                          ng-model="fool1">
                </textarea>
            </div>
        </div>
    </div>
    <div class="media">
        <a class="pull-left" href="#">
            <img class="media-object img-circle" data-src="holder.js/36x36" alt="36x36"
                 src="./images/cs.jpg" style="width: 36px; height: 36px;">
        </a>


        <div class="media-body">

            <div class="social-profile">
                <h3>
                    <a class="text-green" href="#">Claus Stoustrup</a>
                    <span><i class="fa fa-globe"></i>&nbsp;1 hours ago</span>
                </h3>

                Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante
                sollicitudin commodo. Cras purus odio, vestibulum in vulputate at, tempus viverra
                turpis.

                <h3>
                                        <span><a class="text-green" ng-click="reply1? reply1=false : reply1=true"><i
                                                class="fa fa-reply"></i>&nbsp;Reply</a>
                                        </span>

                </h3>

                <textarea msd-elastic ng-show="reply1 == true && !hasComment" data-ng-model="post"
                          ng-enter="newComment()" placeholder="Enter your message" rows="1">
                </textarea>
            </div>


            <div ng-if="hasComment" class="media">
                <a class="pull-left" href="#">
                    <img class="media-object img-circle" data-src="holder.js/36x36" alt="36x36"
                         src="./images/laj.jpg" style="width: 36px; height: 36px;">
                </a>

                <div class="media-body">

                    <div class="social-profile">
                        <h3><a class="text-green" href="#">Lars Jessen</a>
                            <span><i class="fa fa-globe"></i>&nbsp;1 minute ago</span>
                        </h3>
                        {{post}}
                        <h3>
                                <span><a class="text-green" ng-click="reply2 ? reply2=false : reply2=true"><i
                                        class="fa fa-reply"></i>&nbsp;Reply</a>
                                </span>

                        </h3>

                        <textarea ng-if="reply2 == true"
                                  msd-elastic
                                  placeholder="Enter your message"
                                  rows="1"
                                  ng-model="fool2">
                        </textarea>

                    </div>
                </div>
            </div>

            <div class="media">
                <a class="pull-left" href="#">
                    <img class="media-object img-circle" data-src="holder.js/36x36" alt="36x36"
                         src="./images/laj.jpg" style="width: 36px; height: 36px;">
                </a>

                <div class="media-body">

                    <div class="social-profile">
                        <h3><a class="text-green" href="#">Lars Jessen</a>
                            <span><i class="fa fa-globe"></i>&nbsp;1 hours ago</span>

                        </h3>
                        Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante
                        sollicitudin commodo. Cras purus odio, vestibulum in vulputate at, tempus viverra
                        turpis.

                        <h3>
                                <span><a class="text-green" ng-click="reply2 ? reply2=false : reply2=true"><i
                                        class="fa fa-reply"></i>&nbsp;Reply</a>
                                </span>

                        </h3>

                        <textarea ng-if="reply2 == true"
                                  msd-elastic
                                  placeholder="Enter your message"
                                  rows="1"
                                  ng-model="fool2">
                        </textarea>

                    </div>
                </div>
            </div>
        </div>
    </div>

</li>
<hr class="thin">
<li class="media">
    <a class="pull-left" ui-sref="app.main({ id:installation._id })">
        <i class="icon-item ion-cube"
           style="margin-right: 16px;vertical-align: middle; font-size: 225%; color: rgb(248, 187, 57);">
        </i>
    </a>

    <div class="media-body">

        <div class="social-profile">
            <h3><a class="text-green" ui-sref="app.main({ id:installation._id })">Mosture is to high at
                top left corner</a>
                <span><i class="fa fa-globe"></i>&nbsp;2 days ago</span>

            </h3>

            <div class="social-profile">
                Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante
                sollicitudin commodo. Cras purus odio, vestibulum in vulputate at, tempus
                viverra
                turpis.
                <div id="chartContainer" class="sparkline" dx-Sparkline="{
                        bindingOptions: {dataSource: 'sparkSettings.dataSource'},
                        argumentField: 'month',
                        valueField: '2012',
                        type: 'spline',
                        lineWidth: 3,
                        lineColor: '#9ab57e',
                        minColor: '#6babac',
                        maxColor: '#ebdd8f',
                        showMinMax: true,
                        showFirstLast: true
                    }">
                </div>

                <h3>
                     <span>
                         Do you want to water upper left corner ?
                         <a class="text-green">
                             <i class="fa fa-thumbs-up "></i>2 min&nbsp;
                         </a>
                                                  <a class="text-green">
                                                      <i class="fa fa-thumbs-up "></i>5 min&nbsp;
                                                  </a>
                                                  <a class="text-green">
                                                      <i class="fa fa-thumbs-up "></i>10 min
                                                  </a>
                     </span>
                </h3>

                <h3>
                     <span>
                         <a class="text-green" ng-click="reply4 ? reply4=false : reply4=true">
                             <i class="fa fa-reply"></i>&nbsp;Reply
                         </a>
                     </span>
                </h3>
                <textarea ng-if="reply4== true"
                          msd-elastic
                          placeholder="Enter your message"
                          rows="1"
                          ng-model="fool1">
                </textarea>
            </div>
        </div>

        <div class="media">
            <a class="pull-left" href="#">
                <img class="media-object img-circle" data-src="holder.js/36x36"
                     alt="36x36" src="./images/pn.jpg"
                     style="width: 36px; height: 36px;">
            </a>

            <div class="media-body">

                <div class="social-profile">
                    <h3><a class="text-green" href="#">Palle Nielsen</a>
                        <span><i class="fa fa-globe"></i>&nbsp;2 days ago</span>
                    </h3>
                    Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante
                    sollicitudin commodo. Cras purus odio, vestibulum in vulputate at, tempus
                    viverra
                    turpis.

                    <h3>
                                        <span><a class="text-green" ng-click="reply5 ? reply5=false : reply5=true"><i
                                                class="fa fa-reply"></i>&nbsp;Reply</a>
                                        </span>

                    </h3>

                    <textarea ng-if="reply5== true"
                              msd-elastic
                              placeholder="Enter your message"
                              rows="1"
                              ng-model="fool1">
                    </textarea>
                </div>
            </div>
        </div>
    </div>
</li>
<hr class="thin">
<li class="media">
    <a class="pull-left" href="#">
        <img class="media-object img-circle" data-src="holder.js/36x36" alt="36x36"
             src="./images/kp.jpg" style="width: 36px; height: 36px;">
    </a>

    <div class="media-body">
        <div class="social-profile">
            <h3><a class="text-green" href="#">Kristina Petersen</a>
                <span><i class="fa fa-globe"></i>&nbsp;3 days ago</span>
            </h3>
            Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante
            sollicitudin commodo. Cras purus odio, vestibulum in vulputate at, tempus
            viverra
            turpis.

            <h3>
                                    <span><a class="text-green" ng-click="reply3 ? reply3=false : reply3=true"><i
                                            class="fa fa-reply"></i>&nbsp;Reply</a>
                                    </span>

            </h3>

            <textarea ng-if="reply3 == true"
                      msd-elastic
                      placeholder="Enter your message"
                      rows="1"
                      ng-model="fool3">
            </textarea>
        </div>
    </div>
</li>
</ul>
</div>


<!-----   social IOT ----->

</ion-content>
</ion-view>