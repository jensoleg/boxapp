<ion-view title="{{installation.name}} {{installation.placement}}">

    <ion-nav-bar class="nav-title-slide-ios7 bar-light">

        <ion-nav-back-button class="button-clear"><i class="icon ion-ios7-arrow-back"></i></ion-nav-back-button>

        <ion-nav-buttons side="left">
            <button menu-toggle="left" class="button button-icon button-clear ion-navicon"></button>
        </ion-nav-buttons>

        <ion-nav-buttons side="right">
            <button ng-click="addDevice()"
                    class="button icon-left ion-ios7-plus-empty button-clear button-dark"></button>
        </ion-nav-buttons>

    </ion-nav-bar>
    <ion-content>

        <div class="row responsive-sm" style="padding: 0px">
            <div class="col" style="padding: 0px;">
                <google-map class="detail"
                            data-tap-disabled="true"
                            center="map.center"
                            zoom="map.zoom"
                            options="map.options"
                            draggable="false"
                            control="map.control">
                    <marker coords="map.marker" idkey="map.marker.id" icon="map.marker.icon"
                            click="map.onMarkerClick(map.marker)">
                    </marker>
                </google-map>
            </div>

            <div class="col" style="padding: 0px;">
                <ion-list style="padding-bottom: 10px;">
                    <ion-item style="border-style:none; padding: 6px;">
                        <a style="font-size: 85%;" class="item-icon-left">
                            <i class="icon ion-ios7-person"></i>
                            {{installation.contact.name}}
                        </a>
                    </ion-item>
                    <ion-item style="border-style:none;  padding: 6px;">
                        <a style="font-size: 85%;" class="item-icon-left">
                            <i style="font-size: 24px;" class="icon ion-location"
                               ng-click="navigateTo( '{{installation.location.lat}}' , '{{ installation.location.lng}}' )"></i>
                            {{installation.address}}
                        </a>
                    </ion-item>
                    <ion-item style="border-style:none;  padding: 6px;">
                        <a class=" item-icon-left">
                            <i style="font-size: 24px;" class="icon ion-iphone"
                               ng-click="phoneTo('{{installation.contact.phone}}')"></i>
                            {{installation.contact.phone}}
                        </a>
                    </ion-item>
                    <ion-item style="border-style:none;  padding: 6px;">
                        <a style="font-size: 85%;" class="item-icon-left">
                            <i style="font-size: 16px;" class="icon ion-android-mail"
                               ng-click="emailTo('{{installation.contact.email}}')"></i>
                            {{installation.contact.email}}
                        </a>
                    </ion-item>
                </ion-list>
            </div>
        </div>

        <ion-slide-box show-pager="false">
            <ion-slide>
                <div class="list" style="padding-top: 0px;padding-bottom: 0px;margin-bottom: 0px;">
                    <div class="item item-button-right" style="border-width: 0px;">
                        Boxes
                        <button ng-click="nextSlide()"
                                class="button button-clear button-positive">
                            Notes&nbsp;
                            <i class="icon ion-ios7-arrow-forward"></i>
                        </button>
                    </div>
                </div>
                <ion-list>
                    <ion-item ng-repeat="device in installation.devices"
                              ui-sref="app.device({ id: installation._id, deviceid: device._id })">
                        <h3>{{device.name}} {{device.placement}}</h3>
                        <h4>{{device.id}}</h4>
                        <span class="badge badge-balanced">0</span>
                        <ion-option-button class="button-calm" ng-click="activate(device)">Activate
                        </ion-option-button>
                        <ion-option-button class="button-balanced" ng-click="copy(device)">Copy</ion-option-button>
                        <ion-option-button class="button-positive" ng-click="edit(device)">Edit</ion-option-button>
                        <ion-option-button class="button-assertive" ng-click="remove(device)">Delete
                        </ion-option-button>
                    </ion-item>
                </ion-list>
            </ion-slide>
            <ion-slide>
                <div class="list" style="padding-top: 0px;padding-bottom: 0px;margin-bottom: 0px;">
                    <div class="item item-button-left" style="border-width: 0px;">
                        <button ng-click="previousSlide()"
                                class="button button-clear button-positive">
                            <i class="icon ion-ios7-arrow-back"></i>
                            &nbsp;Boxes
                        </button>
                        <span style="float: right" >
                          Notes
                        </span>
                    </div>
                </div>
                <div ng-controller="NotesCtrl" class="messaging-view">
                    <div ng-repeat="message in messages" ng-class="{ other: message.userId == myId }" class="message">

                        <div class="photo icon ion-person"></div>

                        <div class="message">
                            <span>{{ message.text }}
                            </span>
                        </div>
                    </div>
                </div>
            </ion-slide>
        </ion-slide-box>
    </ion-content>
</ion-view>