<ion-view cache-view="false" hide-back-button="true" view-title="{{installation.name}} {{installation.placement}}">

    <ion-nav-bar class="bar-shrink bar-stable">
        <ion-nav-buttons side="left">
            <button menu-toggle="left" ng-hide="$exposeAside.active"
                    class="button button-icon button-clear button-dark ion-navicon">
            </button>
            <button ng-click="navMap()" class="button  button-icon button-clear button-dark ion-android-earth">
            </button>
        </ion-nav-buttons>
        <ion-nav-buttons side="right">
            <button ng-click="aNewDevice()"
                    class="button button-icon button-clear button-dark ion-ios7-plus-empty"></button>
        </ion-nav-buttons>
    </ion-nav-bar>

    <ion-content has-bouncing="false" class="scroll-bar-fade-out" header-shrink scroll-event-interval="5">
        <ion-refresher
            pulling-text="Refresh..."
            on-refresh="doRefresh()">
        </ion-refresher>
        <div ng-class="removed  ? 'disablingDiv' : '' ">
            <div ng-style="isWebView && {'height': '64px'} || {'height': '44px'}"></div>
            <!---- device overview -->
            <div class="row responsive-sm" style="padding: 0px;border-bottom: 1px;border-style: ridge;">
                <div class="col-50" style="padding: 0px; background-position-x: 50%; background-position-y: 50%;
            background-image: url('http://maps.googleapis.com/maps/api/staticmap?center={{installation.location.lat}},{{installation.location.lng}}&zoom=10&size=840x205&maptype=roadmap&format=png32&markers=color:red%7C{{installation.location.lat}},{{installation.location.lng}}')">
                    <img style="max-width: 100%; opacity: 0;"
                         ng-src='http://maps.googleapis.com/maps/api/staticmap?center={{installation.location.lat}},{{installation.location.lng}}&zoom=10&size=840x205&maptype=roadmap&format=png32&markers=color:red%7C{{installation.location.lat}},{{installation.location.lng}}'/>
                </div>

                <div class="col-50" style="padding: 0px;margin-bottom: 8px;">
                    <ion-list style="padding-bottom: 10px;">
                        <ion-item style="border-style:none; padding: 6px;margin: 0px;">
                            <a style="font-size: 85%;" class="item-icon-left">
                                <i class="icon ion-ios7-person"></i>
                                {{::installation.contact.name}}
                            </a>
                        </ion-item>
                        <ion-item style="border-style:none;  padding: 6px;margin: 0px;"
                                  ng-click="navigateTo( '{{installation.location.lat}}' , '{{ installation.location.lng}}' )">
                            <a style="font-size: 85%;" class="item-icon-left">
                                <i style="font-size: 24px;" class="icon ion-location"></i>
                                {{::installation.address}}
                            </a>
                        </ion-item>
                        <ion-item style="border-style:none;  padding: 6px;margin: 0px;"
                                  ng-click="phoneTo('{{installation.contact.phone}}')">
                            <a style="font-size: 85%;" class="item-icon-left">
                                <i style="font-size: 24px;" class="icon ion-iphone"></i>
                                {{::installation.contact.phone}}
                            </a>
                        </ion-item>
                        <ion-item class="boxmedia"
                                  style="border-style:none;  padding: 6px;margin: 0px;"
                                  ng-click="emailTo('{{installation.contact.email}}')">
                            <a style="font-size: 85%;" class="item-icon-left">
                                <i style="font-size: 16px;" class="icon ion-android-mail"></i>
                                {{::installation.contact.email}}
                            </a>
                        </ion-item>
                    </ion-list>
                </div>
            </div>

            <ion-list>
                <div ng-style="showTimeline && {'padding-bottom': '0px'} || {'padding-bottom': '10px'}">
                    <!--div style="padding-bottom: 10px;"-->
                    <ion-item class="boxit reading item-icon-right"
                              ng-click="toggleTimeline()"
                              style="border-width: 0px;padding-top: 8px;padding-bottom: 8px;">
                        <label>
                            <i class="item-icon ion-chatbox-working"
                               style="color: rgb(82, 154, 233); vertical-align: middle;font-size: 140%;">
                            </i>
                            Notes
                        </label>
                        <!--span class="badge badge-balanced" style="right: 36px;">2</span-->
                    </ion-item>
                </div>
            </ion-list>

            <!-----   soicail IOT ----->
            <div ng-if="showTimeline">
                <ion-item class="boxit" style="border-width: 0px;">
                        <textarea placeholder="Notes"
                                  id="txtnotes"
                                  ng-keyup="expandText()"
                                  ng-keydown="expandText()"
                                  ng-change="change()"
                                  ng-model="installation.metadata" rows="15"
                                  ui-Blur="UpdateNote()"></textarea>
                </ion-item>
                <div style="padding-bottom: 20px;"></div>
                <!--bobby-social></bobby-social-->
            </div>

            <!---- device overview -->
            <bobby-device></bobby-device>

            <!---- device setup ontrollers -->
            <bobby-setup></bobby-setup>
        </div>
    </ion-content>
</ion-view>
